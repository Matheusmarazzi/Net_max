{"ast":null,"code":"import _regeneratorRuntime from\"/mnt/sdc2/Linux/Aulas/Curso_Js_Udemy/ReactJs/Aula04/teste/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/mnt/sdc2/Linux/Aulas/Curso_Js_Udemy/ReactJs/Aula04/teste/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/mnt/sdc2/Linux/Aulas/Curso_Js_Udemy/ReactJs/Aula04/teste/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import api from'../../services/Api';import'./filme-info.css';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Filme(){var _useParams=useParams(),id=_useParams.id;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),filme=_useState2[0],setFilme=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var navigate=useNavigate();useEffect(function(){function loadFilme(){return _loadFilme.apply(this,arguments);}function _loadFilme(){_loadFilme=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return api.get(\"/movie/\".concat(id),{params:{api_key:\"d11518fe4a3ae9e63fdca0c10ffe7186\",language:\"pt-BR\"}}).then(function(response){setFilme(response.data);setLoading(false);}).catch(function(){navigate(\"/\",{replace:true});return;});case 2:case\"end\":return _context.stop();}},_callee);}));return _loadFilme.apply(this,arguments);}loadFilme();return function(){console.log(\"desmontado\");};},[navigate,id]);function salvarFilme(){var minhasLista=localStorage.getItem(\"@netmax\");var filmesSalvos=JSON.parse(minhasLista)||[];var hasFilme=filmesSalvos.some(function(filmesSalvos){return filmesSalvos.id===filme.id;});if(hasFilme){toast.warning(\"Esse filme ja está na lista\");return;}filmesSalvos.push(filme);localStorage.setItem(\"@netmax\",JSON.stringify(filmesSalvos));toast.success(\"Filme salvo com sucesso\");}if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"filme-info\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"carregando detalhes...\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"filme-info\",children:[/*#__PURE__*/_jsx(\"h1\",{children:filme.title}),/*#__PURE__*/_jsx(\"img\",{src:\"https://image.tmdb.org/t/p/original/\".concat(filme.backdrop_path),alt:filme.title}),/*#__PURE__*/_jsx(\"h3\",{children:\"Sinopse:\"}),/*#__PURE__*/_jsx(\"span\",{children:filme.overview}),/*#__PURE__*/_jsxs(\"strong\",{children:[\"Avalia\\xE7\\xE3o: \",filme.vote_average]}),/*#__PURE__*/_jsxs(\"div\",{className:\"area-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:salvarFilme,children:\"Salvar\"}),/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"a\",{target:\"blank\",rel:\"external\",href:\"https://youtube.com/results?search_query=\".concat(filme.title,\" trailer\"),children:\"trailer\"})})]})]});}export default Filme;","map":{"version":3,"names":["useEffect","useState","useParams","useNavigate","api","toast","jsx","_jsx","jsxs","_jsxs","Filme","_useParams","id","_useState","_useState2","_slicedToArray","filme","setFilme","_useState3","_useState4","loading","setLoading","navigate","loadFilme","_loadFilme","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","get","concat","params","api_key","language","then","response","data","catch","replace","stop","console","log","salvarFilme","minhasLista","localStorage","getItem","filmesSalvos","JSON","parse","hasFilme","some","warning","push","setItem","stringify","success","className","children","title","src","backdrop_path","alt","overview","vote_average","onClick","target","rel","href"],"sources":["/mnt/sdc2/Linux/Aulas/Curso_Js_Udemy/ReactJs/Aula04/teste/src/pages/Filmes/index.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport {  useParams, useNavigate } from \"react-router-dom\";\nimport api from '../../services/Api';\nimport './filme-info.css';\nimport {toast} from 'react-toastify'\n\n\n\nfunction Filme(){\n    const {id} = useParams();\n    const [filme, setFilme] = useState({});\n    const [loading, setLoading] = useState(true);\n    const navigate = useNavigate();\n\n    useEffect(()=>{\n        async function loadFilme(){\n            await api.get(`/movie/${id}`,{\n                params:{\n                    api_key:\"d11518fe4a3ae9e63fdca0c10ffe7186\",\n                    language:\"pt-BR\",\n                }\n            })\n            .then((response)=>{\n                setFilme(response.data);\n                setLoading(false);\n            })\n            .catch(()=>{\n                navigate(\"/\", {replace: true});\n                return;\n            })\n        }\n        loadFilme();\n\n        return() =>{\n            console.log(\"desmontado\");\n        }\n    },[navigate, id])\n\n    function salvarFilme(){\n        const minhasLista = localStorage.getItem(\"@netmax\");\n        let filmesSalvos = JSON.parse(minhasLista) || [];\n\n        const hasFilme = filmesSalvos.some((filmesSalvos)=>filmesSalvos.id === filme.id);\n\n        if(hasFilme){\n           toast.warning(\"Esse filme ja está na lista\")\n            return;\n        }\n        filmesSalvos.push(filme);\n        localStorage.setItem(\"@netmax\", JSON.stringify(filmesSalvos));\n        toast.success(\"Filme salvo com sucesso\");\n\n    }\n\n\n    if(loading){\n        return(\n            <div className=\"filme-info\">\n                <h1>carregando detalhes...</h1>\n            </div>\n        )\n    }\n    return(\n        <div className=\"filme-info\">\n            <h1>{filme.title}</h1>\n            <img src={`https://image.tmdb.org/t/p/original/${filme.backdrop_path}`} alt={filme.title}/>\n            <h3>Sinopse:</h3>\n            <span>{filme.overview}</span>\n            <strong>Avaliação: {filme.vote_average}</strong>\n\n\n            <div className=\"area-buttons\">\n                <button onClick={salvarFilme}>Salvar</button>\n                <button>\n                    <a target='blank' rel=\"external\" href={`https://youtube.com/results?search_query=${filme.title} trailer`}>\n                        trailer\n                    </a>\n                </button>\n            </div>\n        </div>\n    )\n}\nexport default Filme;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}